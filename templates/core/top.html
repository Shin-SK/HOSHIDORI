{% extends "base.html" %}
{% load static %}

{% block title %}
トップページ
{% endblock %}

{% block top %}
<main>
  {% block content %}
  <section class="top">

	<div class="loading" id="loading">
		<div class="spinner">
			<img src="{% static 'img/logo.svg' %}" alt="">
		</div>
	</div>
	
	<div class="kv">
		<div class="kv__wrap">
			<div class="logo">
				<img src="{% static 'img/logo-full.svg' %}" alt="">
			</div><!-- ポワンっと下から出てくる -->
			<h1><a href="{% url 'account_login' %}">記憶を、記録する。</a></h1><!-- その場でふわっと -->
		</div>
	</div>
	
	<div class="what">
		<div class="container">
			<h2>ホシドリとは</h2><!-- テキストが打鍵されて出てくる感じ -->
			<div class="imi">
				舞台の公演の日程のことを星取りと呼びます。<!-- テキストが打鍵されて出てくる感じ -->
			</div>
		</div>
		<div class="setsumei">
			<div class="setsumei__wrap br container">「星取り（ほしとり）」という言葉は、もともと相撲で勝敗を星印（○や●）で記録する「星取表」に由来するといわれています。相撲では勝ち負けを「星」と呼んで白星（勝ち）・黒星（負け）で表していたのですが、その勝敗表を「星取表」と称したことが語源です。
	
				一方、舞台（特に歌舞伎や演劇）においても出演者の評価や役者の人気・成果を“星”として数える風習が生まれ、相撲と同じく星の数や形で成績や人気度合いを示すようになりました。これが舞台で「星取り」と呼ばれるようになった由来とされています。
			</div>
	
		</div><!-- ふわっと -->
		<div class="tegaru container">
			<div class="text br">今までに見た公演を記録できるウェブアプリ
				それが
				ホシドリです
			</div>
			<div class="icon">
				<img src="{% static 'img/logo.svg' %}" alt="">
			</div>
		</div><!-- ポワンっと下から出てくる -->
	</div>
	
	<div class="about container"><!-- 各ブロック下からふわっと -->
		<div class="about__wrap">
			<div class="box box1">
				<div class="img"><img src="{% static 'img/a-1.jpg' %}" alt=""></div>
				<div class="text">
					<div class="head">観劇記録を手軽に残せる</div>
					<p>ホシドリは観た舞台や演劇作品の感想・評価を簡単に投稿・共有できるサービスです。自分だけの「観劇ログ」を作り、いつでも見返すことができます。</p>
				</div>
			</div>
			<div class="box rev box2">
				<div class="img"><img src="{% static 'img/a-2.jpg' %}" alt=""></div>
				<div class="text">
					<div class="head">新たな演劇との出会い</div>
					<p>ユーザーが投稿したレビューから、自分の好みに合った舞台作品を見つけられます。作品探しや劇場選びに役立てて、新たな感動との出会いを楽しみましょう。</p>
				</div>
			</div>
			<div class="box box3">
				<div class="img"><img src="{% static 'img/a-3.jpg' %}" alt=""></div>
				<div class="text">
					<div class="head">広がるコミュニティ</div>
					<p>ホシドリでは演劇好き同士がつながり、リアルな体験談や熱い想いを気軽に共有できます。観劇の余韻を味わいながら、コミュニティを通じて視野や興味を広げませんか？</p>
				</div>
			</div>
		</div>
	</div>
	
	<div class="tome">
		<div class="text br">観劇体験を記録し、共有することで、舞台の世界はもっと豊かに広がります。
			あなたと舞台の“心ふるわすひととき”を、ホシドリで一緒に楽しみましょう。
		</div>
	</div>

	<div class="icon-gurun">
		<div class="icon">
			<img src="{% static 'img/logo.svg' %}" alt="">
		</div>
	</div>

	
	<div class="comment container">
	
		<div class="img"><img src="{% static 'img/designer.jpg' %}" alt=""></div>
		<div class="text br">演劇に携わり、かなりの年月が経ちました。
			すべての作品に、敬意を払いつつ、改めてその作品を評価し、語り合える場を作れたらと思いこのアプリを制作いたしました。
			演劇が少しでも多くの人の心を豊かにし、
			そのときの記憶を、記録できることを願っています。
			コヤナギシン
		</div>
	</div>
	
	<div class="gekidan container">
		小劇場や予算が多くはない劇団、劇場様はぜひ本アプリをHPとしてご利用ください。
		詳しくは<a href="">コンタクトフォーム</a>よりご連絡ください。
	</div>
	
	<div class="cv container">
		<a href="{% url 'account_login' %}">記憶を、記録する。</a>
	</div>
	
	<div class="tome-logo">
		<img src="{% static 'img/logo-full.svg' %}" alt="">
	</div>
	
	</section>
	
	
	<script>
	  // ScrollTriggerを使う場合は必ず登録
	  gsap.registerPlugin(ScrollTrigger);
	
	  // ローディング処理（既存のもの）
	  document.addEventListener('DOMContentLoaded', function() {
		setTimeout(function() {
		  const loadingEl = document.getElementById('loading');
		  loadingEl.classList.add('fadeout');
		  setTimeout(function(){
			loadingEl.style.display = 'none';
		  }, 500);
		}, 1000);
	  });
	
	  // テキストを1文字ずつ打鍵っぽく表示させる例
	  function typeText(selector, speed = 0.05) {
		const el = document.querySelector(selector);
		if (!el) return;
		const textContent = el.textContent;
		el.textContent = "";
		const splitted = textContent.split("");
		splitted.forEach((char) => {
		  const span = document.createElement("span");
		  span.textContent = char;
		  el.appendChild(span);
		});
		gsap.to(el.querySelectorAll("span"), {
		  opacity: 1,
		  y: 0,
		  stagger: speed,
		  duration: 0.1,
		  ease: "power2.out",
		});
	  }
	  
		// ページのDOMが読み込まれたらアニメーション設定
		document.addEventListener('DOMContentLoaded', function() {
		  // （A）キービジュアル(.kv)はロード後にすぐアニメーション
		  setTimeout(function(){
			gsap.to(".kv .logo", {
			  y: 0,
			  opacity: 1,
			  duration: 1,
			  ease: "power3.out"
			});
			gsap.to(".kv h1", {
			  opacity: 1,
			  duration: 1,
			  delay: 1,
			  ease: "power3.out"
			});
		  }, 1500); // ローディングが終わるタイミングを考慮
	  
		  // （B）.what セクションが画面内に入ったらアニメーション
		  ScrollTrigger.create({
			trigger: ".what",
			start: "top 80%", // ビューポートの80%付近で開始
			once: true,       // 一度だけ実行
			onEnter: () => {
			  typeText(".what h2", 0.1);
			  typeText(".what .imi", 0.1);
			}
		  });
	  
		  gsap.to(".what .setsumei__wrap", {
			scrollTrigger: {
			  trigger: ".what .setsumei",
			  start: "top center",
			  once: true
			},
			opacity: 1,
			y: 0,
			ease: "power2.out"
		  });
	
		  gsap.to(".what .tegaru", {
			scrollTrigger: {
			  trigger: ".what .tegaru",
			  start: "top center",
			  once: true
			},
			opacity: 1,
			y: 0,
			ease: "power2.out"
		  });
	
		  // （C）.about の各.boxを下からふわっと
		  gsap.to(".about .box1", {
			scrollTrigger: {
			  trigger: ".about .box1",
			  start: "top center",
			  once: true
			},
			opacity: 1,
			y: 0,
			ease: "power2.out",
		  });
	
		  gsap.to(".about .box2", {
			scrollTrigger: {
			  trigger: ".about .box2",
			  start: "top center",
			  once: true
			},
			opacity: 1,
			y: 0,
			ease: "power2.out",
		  });
	
		  gsap.to(".about .box3", {
			scrollTrigger: {
			  trigger: ".about .box3",
			  start: "top center",
			  once: true
			},
			opacity: 1,
			y: 0,
			scale: 1,
			ease: "power2.out",
		  });
	
		  // （D）.tome のアイコンがポワンっと
		  gsap.to(".tome .text", {
			scrollTrigger: {
			  trigger: ".tome",
			  start: "top center",
			  once: true
			},
			opacity: 1,
			y: 0,
			ease: "power3.out"
		  });

		  gsap.to(".icon-gurun .icon", {
			scrollTrigger: {
			  trigger: ".icon-gurun",
			  start: "top center",
			  once: true
			},
			y: 0,
			rotation: 360,
			scale: 1,
			transformOrigin: "50% 50%", // 回転の中心(画像の真ん中で回転)
			duration: 1.2,
			ease: "bounce.out"
		  });
	

		  // （H）.tome-logo 下からポワン
		  gsap.to(".tome-logo", {
			scrollTrigger: {
			  trigger: ".tome-logo",
			  start: "top bottom",
			  once: true,
			  markers: false
			},
			opacity: 1,
			y: 0,
			ease: "power3.out"
		  });
	  
		  // （E）.comment の画像とテキスト左右からふわっと
		  gsap.from(".comment .img", {
			scrollTrigger: {
			  trigger: ".comment",
			  start: "top center",
			  once: true
			},
			x: -50,
			opacity: 0,
			duration: 0.8,
			ease: "power2.out"
		  });
		  gsap.from(".comment .text", {
			scrollTrigger: {
			  trigger: ".comment",
			  start: "top 80%",
			  once: true
			},
			x: 50,
			opacity: 0,
			duration: 0.8,
			ease: "power2.out",
			delay: 0.2
		  });
	
		});
	  </script>
	  {% endblock %}
</main>
{% endblock %}
